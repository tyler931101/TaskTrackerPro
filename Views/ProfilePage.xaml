<Page x:Class="TicketManagementSystem.Views.ProfilePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Profile">

	<Grid Background="{StaticResource BackgroundBrush}">
		<StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Width="350">

			<!-- ðŸŸ¢ Avatar Section -->
			<StackPanel HorizontalAlignment="Center" Margin="0,0,0,20">
				<Grid Width="140" Height="140">
					<!-- Outer circular border -->
					<Ellipse Stroke="{StaticResource PrimaryBrush}"
                             StrokeThickness="3"/>

					<!-- Inner circular image fill -->
					<Ellipse x:Name="AvatarCircle"
                             Width="130" Height="130">
						<Ellipse.Fill>
							<ImageBrush ImageSource="{Binding AvatarImage}"
                                        Stretch="UniformToFill"/>
						</Ellipse.Fill>
					</Ellipse>

					<!-- Optional blue glow hover -->
					<Ellipse x:Name="HoverRing"
                             Stroke="#4488FF"
                             StrokeThickness="4"
                             Opacity="0"
                             IsHitTestVisible="False"/>

					<Grid.Triggers>
						<EventTrigger RoutedEvent="MouseEnter">
							<BeginStoryboard>
								<Storyboard>
									<DoubleAnimation Storyboard.TargetName="HoverRing"
                                                     Storyboard.TargetProperty="Opacity"
                                                     To="1" Duration="0:0:0.15"/>
								</Storyboard>
							</BeginStoryboard>
						</EventTrigger>
						<EventTrigger RoutedEvent="MouseLeave">
							<BeginStoryboard>
								<Storyboard>
									<DoubleAnimation Storyboard.TargetName="HoverRing"
                                                     Storyboard.TargetProperty="Opacity"
                                                     To="0" Duration="0:0:0.15"/>
								</Storyboard>
							</BeginStoryboard>
						</EventTrigger>
					</Grid.Triggers>
				</Grid>

				<!-- Upload button -->
				<Button Content="Upload"
						Command="{Binding UploadAvatarCommand}"
						Background="{StaticResource PrimaryBrush}"
						Foreground="White"
						Margin="0,10,0,0"
						BorderThickness="0"
						Height="30"
						FontSize="15">
					<Button.Template>
						<ControlTemplate TargetType="Button">
							<Border Background="{TemplateBinding Background}"
									CornerRadius="0"
									BorderThickness="0">
								<ContentPresenter HorizontalAlignment="Center"
												  VerticalAlignment="Center"/>
							</Border>
						</ControlTemplate>
					</Button.Template>
				</Button>
			</StackPanel>

			<!-- Profile Info -->
			<TextBlock Text="Profile Information"
                       FontSize="26"
                       FontWeight="Bold"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,20"/>

			<TextBlock Text="Role" FontWeight="SemiBold"/>
			<TextBox Text="{Binding Role}" IsReadOnly="True" Background="#EEE"/>

			<TextBlock Text="Username" FontWeight="SemiBold"/>
			<TextBox Text="{Binding Username}" IsReadOnly="True" Background="#EEE"/>

			<TextBlock Text="Full Name" FontWeight="SemiBold"/>
			<TextBox Text="{Binding FullName, UpdateSourceTrigger=PropertyChanged}" />

			<TextBlock Text="Email" FontWeight="SemiBold"/>
			<TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" />

			<TextBlock Text="Password" FontWeight="SemiBold"/>
			<PasswordBox x:Name="PasswordBox" PasswordChanged="PasswordBox_PasswordChanged"/>

			<StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        Margin="0,20,0,0">
				<Button Content="Update"
                        Foreground="White"
                        BorderThickness="0"
                        Width="80"
                        Height="30"
                        FontSize="15"
                        Command="{Binding UpdateProfileCommand}">
					<Button.Template>
						<ControlTemplate TargetType="Button">
							<Border Background="{TemplateBinding Background}" CornerRadius="0">
								<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
							</Border>
						</ControlTemplate>
					</Button.Template>
				</Button>

				<Button Content="Logout"
                        Foreground="White"
                        BorderThickness="0"
                        Width="80"
                        Height="30"
                        FontSize="15"
                        Command="{Binding LogoutCommand}">
					<Button.Template>
						<ControlTemplate TargetType="Button">
							<Border Background="{TemplateBinding Background}" CornerRadius="0">
								<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
							</Border>
						</ControlTemplate>
					</Button.Template>
				</Button>
			</StackPanel>
		</StackPanel>
	</Grid>
</Page>